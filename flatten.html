<!--
 * @Author: your name
 * @Date: 2021-07-31 22:50:58
 * @LastEditTime: 2021-09-13 15:39:50
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: /algorithm/flatten.html
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>组织结构</title>
  </head>
  <body>
    <script>
      var arr = [
        {
          id: 9,
          pid: 8,
          name: "延吉市",
        },
        {
          id: 2,
          name: "辽宁省",
        },
        {
          id: 3,
          name: "河北省",
        },
        {
          id: 4,
          pid: 2,
          name: "沈阳市",
        },
        {
          id: 5,
          pid: 4,
          name: "朝阳区",
        },
        {
          id: 7,
          pid: 6,
          name: "海淀区",
        },
        {
          id: 6,
          pid: 3,
          name: "北京市",
        },
        {
          id: 8,
          name: "吉林省",
        },
      ];
      // hash法
      function arrayToTree(arr) {
        let map = {}
        let tree = []
        for (var i = 0; i < arr.length; i++) {
          arr[i]['children'] = []
          map[arr[i]['id']] = arr[i]
        }
        for (var j = 0; j < arr.length; j++) {
          const node = arr[j]
          if (node['pid']) {
            map[node['pid']].children.push(node)
          } else {
            tree.push(node)
          }
        }
        return tree
      }
      arrayToTree(arr);
    </script>
  </body>
</html>
